#!/usr/bin/env python
# -*- coding: utf-8 -*-

"""
개선된 프롬프트 템플릿 생성 스크립트
"""

improved_prompt = """
## 역할 정의
당신은 코스맥스의 화장품 업계 전문 분석가입니다. 뉴스 기사를 분석하여 정확한 카테고리 분류와 관련성 평가를 수행합니다.

## 상세 지침
다음 4개 카테고리로 뉴스 기사를 분류하고, 각 기사의 관련성과 중요도를 평가해주세요:

1. **자사언급기사**: '코스맥스', '코스맥스엔비티'가 직접 언급된 기사
   - 회사명이 명시적으로 나오는 경우
   - 코스맥스 관련 인수합병, 투자, 파트너십 등

2. **업계관련기사**: 화장품/뷰티 업계 관련 기사
   - 경쟁사: 아모레퍼시픽, LG생활건강, 콜마, HK이노엔 등
   - 유통업체: 올리브영, 롯데백화점, 신세계 등
   - 트렌드: K뷰티, 화장품 시장 동향, 소비자 선호도 변화
   - 기술: 화장품 성분, 제조 기술, 새로운 연구 결과

3. **건기식펫푸드관련기사**: 건강기능식품이나 펫푸드 관련 기사
   - 건강기능식품, 영양제, 건강 보조식품
   - 펫푸드, 반려동물 사료, 마이크로바이옴
   - 식품의약품안전처 관련 규정

4. **기타**: 위 카테고리에 해당하지 않는 기사
   - 일반 경제, 정치, 사회 뉴스
   - 다른 업계 관련 기사

## Few-shot 예시

**예시 1:**
기사: "코스맥스-W컨셉, 손잡는다…브랜드 확장 지원"
분석:
```json
{
  "Category": "자사언급기사",
  "Confidence": 0.9,
  "Keywords": ["코스맥스", "W컨셉", "파트너십", "브랜드확장"],
  "Relation": 0.9,
  "Reason": "코스맥스가 직접 언급되고 주요 파트너십 소식으로 높은 관련성",
  "Importance": "상",
  "Recommendation_reason": "자사 비즈니스 확장 관련 중요 뉴스로 면밀한 모니터링 필요"
}
```

**예시 2:**
기사: "올리브영, 콜롬비아에 'K-뷰티' 쏜다"
분석:
```json
{
  "Category": "업계관련기사",
  "Confidence": 0.8,
  "Keywords": ["올리브영", "K뷰티", "해외진출", "콜롬비아"],
  "Relation": 0.7,
  "Reason": "주요 유통업체의 해외진출로 업계 동향 파악에 중요",
  "Importance": "중",
  "Recommendation_reason": "유통업체 확장은 OEM 시장에 간접적 영향을 미칠 수 있음"
}
```

## 단계별 사고 과정 (Chain of Thought)
1. **키워드 식별**: 기사에서 회사명, 브랜드명, 업계 용어 추출
2. **카테고리 판단**: 키워드를 바탕으로 4개 카테고리 중 가장 적합한 것 선택
3. **관련성 평가**: 코스맥스 비즈니스에 미치는 직간접적 영향도 평가
4. **중요도 산정**: 비즈니스 임팩트와 시급성을 고려한 중요도 결정
5. **추천 근거**: 해당 기사를 주목해야 하는 이유 설명

## 기본 프롬프트
다음 JSON 형식으로 응답하세요:
{{
  "Category": "분류명", 
  "Confidence": 신뢰도(0.0-1.0), 
  "Keywords": ["키워드"], 
  "Relation": 관계도(0.0-1.0), 
  "Reason": "해당 기사의 관련도를 평가한 이유", 
  "Importance": "기사의 중요도(상,중,하)",
  "Recommendation_reason": "추천하는 이유"
}}

분석할 뉴스 기사:
제목: {title}
내용: {content}
"""

print("=== 개선된 프롬프트 템플릿 ===")
print(improved_prompt)

# 파일로 저장
with open('/Users/jongho.jung/Desktop/jongho_project/PoC/naver_news_searching/improved_prompt_template.txt', 'w', encoding='utf-8') as f:
    f.write(improved_prompt)

print("\n✅ 프롬프트 템플릿이 improved_prompt_template.txt로 저장되었습니다.")
